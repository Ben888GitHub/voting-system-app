(this["webpackJsonpvoting-system-app"]=this["webpackJsonpvoting-system-app"]||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a(16),s=a.n(r),o=(a(87),a(88),a(89),a(18)),i=a.n(o),l=a(30),j=a(7),d=(a(91),a(146)),b=a(152),u=a(148),m=a(153),h=a(149),O=a(151),p=a(78),y=a.n(p),x=a(77),f=a.n(x),g=a(72),v=a.n(g),S=(a(104),a.p+"static/media/MrWorlLogo.16c111a6.png"),C=a(31),k=a.n(C),w=a(43),P=a(145),N=a(150),D=a(147),T=a(74),_=a.n(T),E=a(75),B=a.n(E),I=a(32);var W=function(e){var t=e.latestPrice,a=e.modalData,r=(e.paymentReady,e.paymentCancel,e.showPayment),s=e.setShowPayment,o=e.initVotePoints,b=e.charName,u=Object(c.useState)(!1),m=Object(j.a)(u,2),O=(m[0],m[1],Object(c.useState)("non-static")),p=Object(j.a)(O,2),y=p[0],x=p[1],f=Object(I.useStripe)(),g=Object(I.useElements)(),v=Object(c.useState)({name:"",email:""}),S=Object(j.a)(v,2),C=S[0],T=S[1],E=Object(c.useState)(!1),W=Object(j.a)(E,2),R=W[0],F=W[1],V=function(){return F(!0)},H=Object(c.useState)(!1),M=Object(j.a)(H,2),A=M[0],Y=M[1],q=function(){Y(!0),s(!1)},z=function(){return Y(!1)},L=Object(c.useState)(!1),G=Object(j.a)(L,2),J=G[0],$=G[1],K=function(){$(!0),s(!1)},U=function(){return $(!1)},Q=Object(c.useState)(""),X=Object(j.a)(Q,2),Z=X[0],ee=X[1],te=Object(c.useState)(0),ae=Object(j.a)(te,2),ne=(ae[0],ae[1],Object(c.useState)(0)),ce=Object(j.a)(ne,2),re=(ce[0],ce[1],Object(c.useState)(!1)),se=Object(j.a)(re,2),oe=se[0],ie=se[1],le=Object(c.useState)("Complete Payment"),je=Object(j.a)(le,2),de=je[0],be=je[1],ue=Object(c.useState)(!1),me=Object(j.a)(ue,2),he=me[0],Oe=me[1],pe=Object(c.useState)(""),ye=Object(j.a)(pe,2),xe=(ye[0],ye[1],function(){return Object(n.jsx)(P.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}),fe=function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f.createPaymentMethod({type:"card",card:g.getElement(I.CardElement),billing_details:C});case 3:if((c=e.sent).error){e.next=32;break}return console.log("Stripe 23 | Token Generated",c.paymentMethod),console.log(c.paymentMethod.id),ie(!0),x("static"),be("Processing..."),Oe(!0),e.prev=11,e.next=14,k.a.post("https://voting-payments.xctuality.com/stripe/charge",{amount:100*t,payment_method_id:c.paymentMethod.id,points:o,char_id:a.id,charName:b,cust_name:C.name,cust_email:C.email});case 14:r=e.sent,console.log(r.data),r.data.error&&(console.log(r.data.error),ee(r.data.error),K(),ie(!1),x("non-static"),be("Complete Payment"),Oe(!1),T({name:"",email:""})),r.data.requires_action&&(console.log(r.data),console.log(r.data.requires_action),console.log(r.data.payment_intent_client_secret),f.handleCardAction(r.data.payment_intent_client_secret).then((function(e){if(e.error)console.log(e.error),console.log("Your card was not authenticated, please try again"),ee("Your card was not authenticated, please try again"),K(),ie(!1),x("non-static"),be("Complete Payment"),Oe(!1),T({name:"",email:""});else if("requires_confirmation"===e.paymentIntent.status){console.log(e.paymentIntent.id),function(){var t=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post("https://voting-payments.xctuality.com/stripe/charge",{payment_intent_id:e.paymentIntent.id}).then((function(e){e?(console.log(e),console.log(e.data),console.log(e.config.data),e.data.error||(console.log("3D Secure Payment Successful"),q(),ie(!1),x("non-static"),be("Complete Payment"),Oe(!1),T({name:"",email:""})),e.data.error&&(console.log("3D Secure Payment Failure"),ee(e.data.error),K(),ie(!1),x("non-static"),be("Complete Payment"),Oe(!1),T({name:"",email:""}))):console.log("Payment error")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}}))),r.data.success&&(console.log("CheckoutForm.js 25 | payment successful!"),q(),ie(!1),x("non-static"),be("Complete Payment"),Oe(!1),T({name:"",email:""})),r.data.success||console.log("Payment Intent Process..."),e.next=30;break;case 22:e.prev=22,e.t0=e.catch(11),console.log(e.t0.message),V(),x("non-static"),be("Complete Payment"),ie(!1),Oe(!1);case 30:e.next=38;break;case 32:console.log(c.error.message),V(),x("non-static"),be("Complete Payment"),ie(!1),Oe(!1);case 38:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsxs)(h.a,{show:r,onHide:function(){s(!1)},keyboard:!0,backdrop:y,children:[Object(n.jsx)(h.a.Header,{closeButton:!0,children:Object(n.jsx)(h.a.Title,{children:"Process Payment"})}),Object(n.jsx)("div",{style:{padding:40},children:Object(n.jsxs)("form",{onSubmit:fe,children:[Object(n.jsxs)(N.a.Group,{children:[Object(n.jsx)(N.a.Label,{style:{fontWeight:500},children:"Cardholder Name"}),Object(n.jsx)(N.a.Control,{value:C.name,onChange:function(e){T(Object(w.a)(Object(w.a)({},C),{},{name:e.target.value}))},type:"text",placeholder:"Cardholder Name",required:!0,autocomplete:"name"})]}),Object(n.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(N.a.Label,{style:{fontWeight:500},children:"Email"}),Object(n.jsx)(N.a.Control,{value:C.email,onChange:function(e){T(Object(w.a)(Object(w.a)({},C),{},{email:e.target.value}))},type:"email",placeholder:"Email",required:!0})]}),Object(n.jsx)("h5",{style:{marginTop:20},children:"Card Details"}),Object(n.jsx)("div",{style:{borderStyle:"solid",borderColor:"#CED4D9",borderWidth:1.8,borderRadius:2,padding:5},children:Object(n.jsx)(I.CardElement,{onReady:function(e){return e.focus()},options:{style:{base:{color:"#000",backgroundColor:"white",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"18px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},":focus::placeholder":{color:"#fff"},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}}})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsxs)(d.a,{disabled:oe,variant:"dark",type:"submit",style:{width:"50%",fontWeight:600},children:[de,he?Object(n.jsx)(xe,{}):null]})})]})})]}),Object(n.jsx)("div",{children:Object(n.jsxs)(h.a,{show:A,onHide:z,keyboard:!0,backdrop:y,style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(_.a,{style:{width:80,height:80,color:"#27A844",alignSelf:"center"}}),Object(n.jsx)("h3",{style:{color:"#27A844",marginTop:15},children:"Payment Successful"}),Object(n.jsxs)(h.a.Body,{style:{fontWeight:"600"},children:["You have successfully given ",o," vote(s) to ",b," "]}),Object(n.jsxs)("h1",{children:["$",Math.round(t).toFixed(2)]}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(d.a,{style:{fontWeight:"600",width:"65%",marginTop:30},variant:"success",onClick:function(){z()},children:"Done"})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"900%"},children:Object(n.jsxs)(h.a,{show:J,onHide:U,keyboard:!0,backdrop:y,style:{textAlign:"center"},children:[Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(B.a,{style:{width:80,height:80,color:"#DC3544",alignSelf:"center"}}),Object(n.jsx)("h3",{style:{color:"#DC3544",marginTop:15},children:"Payment Failure"}),Object(n.jsxs)("h4",{children:["Sorry, we are unable to process ",Object(n.jsx)("br",{})," your payment"]}),Object(n.jsxs)(h.a.Body,{style:{fontWeight:"500",fontSize:18},children:["Your bank replied with this error:"," ",Object(n.jsx)("p",{style:{color:"#DC3544"},children:Z}),"Please check your payment details and try again."]}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(d.a,{style:{fontWeight:"600",width:"65%",marginTop:30},variant:"danger",onClick:function(){U()},children:"OK"})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})}),Object(n.jsx)(h.a,{show:R,onHide:function(){return F(!1)},keyboard:!1,children:Object(n.jsx)(D.a,{show:R,variant:"danger",onClose:function(){return F(!1)},dismissible:!0,children:Object(n.jsx)(D.a.Heading,{children:"Please verify your input details"})})})]})},R=a(76),F=Object(R.a)("pk_live_bYVNIkPB8GD7qb69N3SmysbF");var V=function(e){var t=e.latestPrice,a=e.modalData,c=e.paymentCancel,r=e.paymentReady,s=e.showPayment,o=e.setShowPayment,i=e.initVotePoints,l=e.charName;return Object(n.jsx)(I.Elements,{stripe:F,children:Object(n.jsx)(W,{latestPrice:t,modalData:a,paymentCancel:c,paymentReady:r,showPayment:s,setShowPayment:o,initVotePoints:i,charName:l})})},H=a(11);var M=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!1),o=Object(j.a)(s,2),p=o[0],x=o[1],g=Object(c.useState)([]),C=Object(j.a)(g,2),w=C[0],P=C[1],N=Object(c.useState)({}),D=Object(j.a)(N,2),T=D[0],_=D[1],E=Object(c.useState)(1),B=Object(j.a)(E,2),I=B[0],W=B[1],R=Object(c.useState)(0),F=Object(j.a)(R,2),M=F[0],A=F[1],Y=Object(c.useState)(11),q=Object(j.a)(Y,2),z=q[0],L=(q[1],Object(c.useState)(0)),G=Object(j.a)(L,2),J=G[0],$=G[1],K=J+z,U=Object(c.useState)(!1),Q=Object(j.a)(U,2),X=Q[0],Z=Q[1],ee=Object(c.useState)(!1),te=Object(j.a)(ee,2),ae=te[0],ne=te[1],ce=Object(c.useState)(""),re=Object(j.a)(ce,2),se=re[0],oe=re[1],ie=Object(H.f)().charId;Object(c.useEffect)((function(){ie?function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://voteapi.xctuality.com/character/".concat(ie));case 3:t=e.sent,console.log(t.data.data),P(t.data.data),r(!1),oe("justify-center"),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()():function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://voteapi.xctuality.com/characters");case 3:t=e.sent,P(t.data.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var le=function(){return x(!1)},je=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),_(t),e.next=4,k.a.get("https://voteapi.xctuality.com/votes/".concat(t.id));case 4:a=e.sent,A(a.data.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){Z(!0),le()},be=function(){return Object(n.jsx)(d.a,{onClick:function(){W(1),$(0),ne(!1)},style:{marginLeft:10,fontSize:16,fontWeight:"600",height:30,marginTop:12.5,borderRadius:15,paddingTop:2},variant:"dark",children:"Reset"})};return Object(n.jsxs)("div",{children:[Object(n.jsx)(b.a,{bg:"dark",className:"navbar-height"}),a?Object(n.jsxs)("h1",{className:"top-voting-header",children:["VOTE TODAY",Object(n.jsx)(u.a,{className:"mr-world-logo",src:S}),"12 DECEMBER"]}):null,Object(n.jsx)(v.a,{swipeable:!0,draggable:!1,showDots:!0,responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:1920},items:7,slidesToSlide:7},desktop:{breakpoint:{max:1920,min:1200},items:5,slidesToSlide:5},tablet:{breakpoint:{max:1200,min:768},items:3,slidesToSlide:3},mobile:{breakpoint:{max:768,min:0},items:1,slidesToSlide:1}},ssr:!0,infinite:!1,arrows:!0,autoPlaySpeed:1e3,keyBoardControl:!0,customTransition:"all .5",transitionDuration:500,containerClass:"carousel-container ".concat(se),dotListClass:"custom-dot-list-style",itemClass:"carousel-item-padding-40-px",children:w.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(u.a,{className:"character-image",src:e.charImg}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{style:{marginTop:-130},className:"col d-flex justify-content-center",children:Object(n.jsx)(m.a,{className:"card-style-main",children:Object(n.jsxs)(m.a.Body,{children:[Object(n.jsx)("h5",{className:"character-name-card",children:e.charName}),Object(n.jsx)(d.a,{variant:"secondary",onClick:function(){return je(e)},children:"See Profile"})]})})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]},e)}))}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)(h.a,{show:p,onHide:le,keyboard:!0,children:[Object(n.jsx)(h.a.Header,{closeButton:!0,children:Object(n.jsx)("h3",{className:"character-name-card modal-title w-100 text-center",children:T.charName})}),Object(n.jsxs)("h5",{style:{fontWeight:"bold",marginTop:5},className:"modal-title w-100 text-center",children:["Current Votes: ",M]}),Object(n.jsx)(h.a.Body,{className:"modal-title w-100 text-center",children:T.charBio}),Object(n.jsx)(u.a,{className:"modal-character-image",src:T.charImg}),Object(n.jsxs)("div",{className:"button-style-main",children:[Object(n.jsx)(O.a,{"aria-label":"remove",onClick:function(){I>1&&(W(I-1),$(J-11))},children:Object(n.jsx)(f.a,{style:{fontSize:30,color:"#333B3F"}})}),Object(n.jsxs)("h5",{style:{marginTop:14},children:["Your Vote: ",I]}),Object(n.jsx)(O.a,{"aria-label":"add",onClick:function(){I<50&&(W(I+1),$(z*I),I>0&&ne(!0))},children:Object(n.jsx)(y.a,{style:{fontSize:30,color:"#333B3F"}})}),ae?Object(n.jsx)(be,{}):null]}),Object(n.jsx)("div",{className:"button-vote-position",children:Object(n.jsxs)(d.a,{onClick:de,variant:"dark",className:"button-vote",children:["VOTE $",Math.round(z).toFixed(2)*I]})})]}),Object(n.jsx)(V,{latestPrice:K,modalData:T,paymentCancel:function(){return Z(!1)},paymentReady:de,showPayment:X,setShowPayment:Z,initVotePoints:I,charName:T.charName})]})};var A=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(H.c,{children:[Object(n.jsx)(H.a,{path:"/:charId",component:M}),Object(n.jsx)(H.a,{path:"/",exact:!0,component:M})]})})},Y=a(45);s.a.render(Object(n.jsx)(Y.a,{children:Object(n.jsx)(A,{})}),document.getElementById("root"))},87:function(e,t,a){},88:function(e,t,a){},91:function(e,t,a){}},[[129,1,2]]]);
//# sourceMappingURL=main.a05203d3.chunk.js.map